{% extends "base.html" %}
{% load static %}

{% block content %}

<div style="margin: 24px 32px 0 32px;">

    <!-- HEADER STRIP -->
    <div style="
        background: #f5f7fb;
        border: 1px solid #e2e6f0;
        border-bottom: none;
        padding: 10px 20px;
        font-size: 16px;
        font-weight: 600;
        color: #444;
    ">
        Unit Master
    </div>

    <!-- BODY CARD -->
    <div style="
        border: 1px solid #e2e6f0;
        border-top: none;
        background: #ffffff;
        padding: 16px 20px 20px 20px;
    ">
        <div class="row">
            <!-- LEFT FORM -->
            <div class="col-md-5">

                <form method="post">
                    {% csrf_token %}
                    <!-- hidden field so view knows when editing -->
                    <input type="hidden"
                           name="unit_id"
                           value="{{ form.instance.id|default_if_none:'' }}"/>

                    <div class="mb-3 row">
                        <label class="col-sm-3 col-form-label">
                            <span style="color:red;">*</span> Unit
                        </label>
                        <div class="col-sm-9">
                            {{ form.name }}
                        </div>
                    </div>

                    <div class="mt-3">
                        <button type="button"
                                onclick="window.location.href='{% url 'unit_master' %}'"
                                class="btn btn-primary"
                                style="min-width:80px; margin-right:8px;">
                            New
                        </button>

                        <button type="submit"
                                class="btn btn-success"
                                style="min-width:80px; margin-right:8px;">
                            Save
                        </button>

                        <!-- Modify behaves same as Save (because row click loads data) -->
                        <button type="submit"
                                class="btn btn-secondary"
                                style="min-width:80px; margin-right:8px;">
                            Modify
                        </button>

                        <a href="{% url 'master_dashboard' %}"
                           class="btn btn-danger"
                           style="min-width:80px;">
                            Close
                        </a>
                    </div>
                </form>

            </div>

            <!-- RIGHT TABLE -->
            <div class="col-md-7">
                <table class="table table-sm table-bordered"
                       style="font-size:13px;">
                    <thead style="background:#0c7db1; color:#fff;">
                        <tr>
                            <th>Unit Name</th>
                            <th style="width:80px; text-align:center;">Id</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for u in units %}
                        <tr>
                            <td>
                                <!-- click row -> load into form via ?id -->
                                <a href="{% url 'unit_master' %}?id={{ u.id }}"
                                   style="text-decoration:none; color:#000;">
                                    {{ u.name }}
                                </a>
                            </td>
                            <td style="text-align:center;">{{ u.id }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="2" class="text-center text-muted">
                                No units defined yet.
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

        </div>
    </div>
</div>

{% endblock %}